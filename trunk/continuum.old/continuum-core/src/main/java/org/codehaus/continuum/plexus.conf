<plexus>

  <load-on-start>
    <component>
      <role>org.codehaus.plexus.continuum.network.ConnectionFactory</role>
      <role-hint>trigger-socket</role-hint>
    </component>
    <component>
      <role>org.codehaus.plexus.continuum.network.ConnectionFactory</role>
      <role-hint>registrar-socket</role-hint>
    </component>
  </load-on-start>

  <components>

    <component>
      <role>org.codehaus.plexus.continuum.Continuum</role>
      <implementation>org.codehaus.plexus.continuum.DefaultContinuum</implementation>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.continuum.buildqueue.BuildQueue</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.project.MavenProjectBuilder</role>
        </requirement>
        <requirement>
          <role>org.codehaus.plexus.continuum.ContinuumBuilder</role>
        </requirement>
        <requirement>
          <role>org.codehaus.plexus.continuum.projectstorage.ProjectStorage</role>
        </requirement>
      </requirements>
    </component>

    <component>
      <role>org.codehaus.plexus.continuum.buildqueue.BuildQueue</role>
      <implementation>org.codehaus.plexus.continuum.buildqueue.SimpleBuildQueue</implementation>
    </component>

    <component>
      <role>org.codehaus.plexus.continuum.ContinuumBuilder</role>
      <implementation>org.codehaus.plexus.continuum.DefaultContinuumBuilder</implementation>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.continuum.notification.ContinuumNotifier</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.MavenCore</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.scm.Scm</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.project.MavenProjectBuilder</role>
        </requirement>
      </requirements>
      <configuration>
        <checkout-directory>${plexus.home}/continuum/checkout</checkout-directory>
      </configuration>
    </component>

    <!--
     |
     | Maven components
     |
     |-->

    <!-- Scm -->
    <component>
      <role>org.apache.maven.scm.Scm</role>
      <implementation>org.apache.maven.scm.provider.cvslib.CvsScm</implementation>
    </component>

    <!-- MavenProjectBuilder -->
    <component>
      <role>org.apache.maven.project.MavenProjectBuilder</role>
      <implementation>org.apache.maven.project.DefaultMavenProjectBuilder</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.model.io.xpp3.MavenXpp3Reader</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.model.io.xpp3.MavenXpp3Writer</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.project.ModelInheritanceAssembler</role>
        </requirement>
        <requirement>
          <role>org.apache.maven.artifact.factory.MavenArtifactFactory</role>
        </requirement>
      </requirements>
    </component>
    <component>
      <role>org.apache.maven.model.io.xpp3.MavenXpp3Reader</role>
      <implementation>org.apache.maven.model.io.xpp3.MavenXpp3Reader</implementation>
    </component>
    <component>
      <role>org.apache.maven.model.io.xpp3.MavenXpp3Writer</role>
      <implementation>org.apache.maven.model.io.xpp3.MavenXpp3Writer</implementation>
    </component>
    <component>
      <role>org.apache.maven.artifact.factory.MavenArtifactory</role>
      <implementation>org.apache.maven.artifact.factory.DefaultMavenArtifactory</implementation>
    </component>

    <!--
     |
     | Triggers
     |
     |-->

    <component>
      <role>org.codehaus.plexus.continuum.network.ConnectionConsumer</role>
      <role-hint>trigger</role-hint>
      <implementation>org.codehaus.plexus.continuum.trigger.network.SimpleNetworkTrigger</implementation>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.continuum.Continuum</role>
        </requirement>
      </requirements>
    </component>
    <!--
    <component>
      <role>org.codehaus.plexus.continuum.trigger.ContinuumTrigger</role>
      <implementation>org.codehaus.plexus.continuum.trigger.alarmclock.AlarmClockTrigger</implementation>
      <configuration>
        <interval>1</interval>
      </configuration>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.continuum.Continuum</role>
        </requirement>
      </requirements>
    </component>
    -->

    <!--
     |
     | Registrars
     |
     |-->

    <component>
      <role>org.codehaus.plexus.continuum.network.ConnectionConsumer</role>
      <role-hint>registrar</role-hint>
      <implementation>org.codehaus.plexus.continuum.registration.network.SimpleNetworkRegistrar</implementation>
      <requirements>
        <requirement>
          <role>org.codehaus.plexus.continuum.Continuum</role>
        </requirement>
      </requirements>
    </component>

    <!--
     |
     | Notifiers
     |
     |-->
<!-- -->
    <component>
      <role>org.codehaus.plexus.continuum.notification.ContinuumNotifier</role>
      <implementation>org.codehaus.plexus.continuum.notification.mail.DefaultEmailNotifier</implementation>
      <configuration>
        <smtp-server>localhost</smtp-server>
<!--
        <smtp-port>10025</smtp-port>
-->
        <smtp-port>25</smtp-port>
        <to>trygvis@codehaus.org</to>
        <from>trygvis@codehaus.org</from>
      </configuration>
    </component>
    <!-- For a production release this might be removed -->
<!--
    <component>
      <role>org.codehaus.plexus.continuum.notification.ContinuumNotifier</role>
      <implementation>org.codehaus.plexus.continuum.notification.console.ConsoleNotifier</implementation>
    </component>
-->
    <!-- ProjectStorage -->
    <component>
      <role>org.codehaus.plexus.continuum.projectstorage.ProjectStorage</role>
      <implementation>org.codehaus.plexus.continuum.projectstorage.FileProjectStorage</implementation>

      <requirements>
        <requirement>
          <role>org.apache.maven.project.MavenProjectBuilder</role>
        </requirement>
      </requirements>

      <configuration>
        <storage-directory>${plexus.home}/continuum/storage</storage-directory>
      </configuration>
    </component>

    <!--
     |
     | Socket listeners
     |
     |-->
    <component>
      <role>org.codehaus.plexus.continuum.network.ConnectionFactory</role>
      <role-hint>trigger-socket</role-hint>
      <implementation>org.codehaus.plexus.continuum.network.SimpleServerSocketConnectionFactory</implementation>

      <requirements>
        <requirement>
          <role>org.codehaus.plexus.continuum.network.ConnectionConsumer</role>
          <role-hint>trigger</role-hint>
        </requirement>
      </requirements>

      <configuration>
        <port>10000</port>
      </configuration>
    </component>

    <component>
      <role>org.codehaus.plexus.continuum.network.ConnectionFactory</role>
      <role-hint>registrar-socket</role-hint>
      <implementation>org.codehaus.plexus.continuum.network.SimpleServerSocketConnectionFactory</implementation>

      <requirements>
        <requirement>
          <role>org.codehaus.plexus.continuum.network.ConnectionConsumer</role>
          <role-hint>registrar</role-hint>
        </requirement>
      </requirements>

      <configuration>
        <port>10001</port>
      </configuration>
    </component>

    <!-- This should be removed at a later time when it's discovered from the maven jars -->
    <component>
      <role>org.apache.maven.plugin.manager.PluginManagerManager</role>
      <implementation>org.apache.maven.plugin.manager.DefaultPluginManagerManager</implementation>
      <requirements>
        <requirement>
          <role>org.apache.maven.plugin.manager.PluginManager</role>
          <field-name>pluginManagers</field-name>
        </requirement>
      </requirements>
      <configuration>
        <maven-home>${maven.home}</maven-home>
      </configuration>
    </component>
    <component>
      <role>org.apache.maven.plugin.manager.PluginManager</role>
      <role-hint>plexus</role-hint>
      <implementation>org.apache.maven.plugin.plexus.PlexusPluginManager</implementation>
    </component>
    <component>
      <role>org.apache.maven.plugin.plexus.executor.PluginExecutor</role>
      <role-hint>field</role-hint>
      <implementation>org.apache.maven.plugin.plexus.executor.FieldPluginExecutor</implementation>
    </component>
    <component>
      <role>org.apache.maven.plugin.plexus.executor.PluginExecutor</role>
      <role-hint>setter</role-hint>
      <implementation>org.apache.maven.plugin.plexus.executor.SetterPluginExecutor</implementation>
    </component>
    <component>
      <role>org.apache.maven.plugin.plexus.executor.PluginExecutor</role>
      <role-hint>singleton</role-hint>
      <implementation>org.apache.maven.plugin.plexus.executor.SingletonPluginExecutor</implementation>
    </component>
    <component>
      <role>org.apache.maven.plugin.plexus.executor.PluginExecutor</role>
      <role-hint>integrated</role-hint>
      <implementation>org.apache.maven.plugin.plexus.executor.IntegratedPluginExecutor</implementation>
    </component>

  </components>

</plexus>
